# Подготовка к запуску автотестов

### Используемое окружение:
1. Java 11
2. IntelliJ IDEA
3. Docker Desktop
4. Установить Node.js
5. Браузер: Google Chrome v. 110 или ранее
6. Убедиться, что порты 8080, 9999 и 5432 или 3306 (в зависимости от выбранной базы данных) свободны.

### Подготовка перед запуском:
1. Клонировать репозиторий на компьютер
1. Запустить Docker Desktop
1. Открыть проект в IntelliJ IDEA

### Этапы перед запуском тестов:
1. Находясь в корневой папке проекта ввести в терминале команду `docker-compose up` для запуска образов БД и симулятор банковских сервисов
2. В новой вкладке терминала запустить SUT через команду:
- для MySQL - `java -jar .\artifacts\aqa-shop.jar --spring.datasource.url=jdbc:mysql://localhost:3306/app-db`
- для PostgresSQL - `java -jar .\artifacts\aqa-shop.jar --spring.datasource.url=jdbc:postgresql://localhost:5432/postgres`

### Запуск тестов:
1. В новой вкладке терминала запустить тесты через команду `.\gradlew clean test` или `gradlew clean test`

### Перезапуск приложения и тестов:
Если необходимо перезапустить приложение и/или тесты (например, для другой БД), необходимо выполнить остановку работы в запущенных ранее вкладках терминала, нажав в них Ctrl+С

### Формирование отчета AllureReport по результатам тестирования
В новой вкладке терминала или нажав двойной Ctrl ввести команду gradlew `allureServe`. <br/>
Сгенерированный отчет откроется в браузере автоматически. После просмотра и закрытия отчета можно остановить работу команды, нажав Ctrl+С или закрыть вкладку Run и нажать Disconnect.
